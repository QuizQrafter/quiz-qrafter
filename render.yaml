services:
    - type: web
      name: quizqrafter-api
      runtime: node
      rootDir: ./backend/
      healthCheckPath: /healthz
      buildCommand: npm ci && npm run build
      startCommand: npm run prisma:deploy && npm run start
      plan: free
      envVars:
          - key: DATABASE_URL
            fromDatabase:
                name: quizqrafterdb
                property: connectionString
    - type: web
      name: quizqrafter
      runtime: static
      rootDir: ./frontend/
      buildCommand: npm run build
      staticPublishPath: ./build/

databases:
    - name: quizqrafterdb
      databaseName: quizqrafterdb
      user: quizqrafter
      plan: free
